@model BW_Admin.tbl_Account

@{
    ViewBag.Title = "ChangePassword";
}

<div class="content">

    <div class="module">
        <div class="module-head">
            <h3>Change Password</h3>
        </div>
        <div class="module-body">

            @using (Html.BeginForm("UpdatePassword", "Account", FormMethod.Post, new { @class = "form-horizontal row-fluid" }))
            {
                <div class="form-horizontal">
                    <hr />
                    <div class="control-group">
                        <label class="control-label">Current Password</label>
                        <div class="controls">
                            <input type="text" name="CPassword" id="txtCPass" class="span8" required />
                        </div>
                    </div>

                    <div class="control-group">
                        <label class="control-label">New Password</label>
                        <div class="controls">
                            <input type="text" name="NPassword" id="txtNPass" class="span8" required />
                        </div>
                    </div>

                    <div class="control-group">
                        <div class="col-md-offset-2 controls">
                            <input type="submit" value="Update Password" class="btn btn-success" />
                        </div>
                    </div>
                </div>
            }

            <div>
                @Html.ActionLink("Back to Home", "Index", "Home")
            </div>
        </div>
    </div>
</div>

@section AsyncForms{

    <script src="~/scripts/jquery.form.min.js" type="text/javascript"></script>

    <script>
        (function () {
            $('form').ajaxForm({
                beforeSend: function () {
                    alert("Updating...");
                },
                success: function (d) {
                    document.getElementsByClassName("form-horizontal")[0].reset();
                },
                complete: function (xhr) {
                    alert(xhr.responseText);
                }
            });
        })();
    </script>
}